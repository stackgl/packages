{"readme":"<h1 class=\"title\"><a target=\"_blank\" href=\"https://github.com/Jam3/perspective-camera\">perspective-camera</a><div class=\"contrib\"></div></h1>\n<p><a href=\"http://github.com/badges/stability-badges\"></a></p>\n<p><iframe scrolling=\"no\" seamless=\"seamless\" src=\"http://jam3.github.io/perspective-camera/\"></iframe></p>\n<p><a href=\"http://jam3.github.io/perspective-camera/\">demo</a> - <a href=\"http://github.com/Jam3/perspective-camera/blob/master/demo/canvas.js\">source</a></p>\n<p>A high-level 3D perspective camera with a familiar and convenient interface, built from modular pieces.</p>\n<pre><code class=\"lang-js\"><div class=\"line\"><span class=\"source js\"><span>var&#xA0;createCamera&#xA0;=&#xA0;require(&apos;perspective-camera&apos;)</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source js\"><span>var&#xA0;camera&#xA0;=&#xA0;createCamera({</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;fov:&#xA0;Math.PI/4,</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;near:&#xA0;0.01,</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;far:&#xA0;100,</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;viewport:&#xA0;[0,&#xA0;0,&#xA0;width,&#xA0;height]</span></span></div><div class=\"line\"><span class=\"source js\"><span>})</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source js\"><span>//set&#xA0;up&#xA0;our&#xA0;camera</span></span></div><div class=\"line\"><span class=\"source js\"><span>camera.translate([&#xA0;x,&#xA0;y,&#xA0;z&#xA0;])</span></span></div><div class=\"line\"><span class=\"source js\"><span>camera.lookAt([&#xA0;0,&#xA0;0,&#xA0;0&#xA0;])</span></span></div><div class=\"line\"><span class=\"source js\"><span>camera.update()</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source js\"><span>//do&#xA0;some&#xA0;3D&#xA0;hit-testing</span></span></div><div class=\"line\"><span class=\"source js\"><span>var&#xA0;ray&#xA0;=&#xA0;camera.createPickingRay(mouseInput)</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source js\"><span>if&#xA0;(ray.intersectsSphere(center,&#xA0;radius))&#xA0;{</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;console.log(&quot;Mouse&#xA0;hit&#xA0;3D&#xA0;sphere!&quot;)</span></span></div><div class=\"line\"><span class=\"source js\"><span>}</span></span></div>\n</code></pre>\n<p>See <a href=\"http://github.com/Jam3/perspective-camera/blob/master/demo/canvas.js\">demo/canvas.js</a> for a full example, using Canvas2D.</p>\n<h2 id=\"usage\">Usage</h2>\n<p><a href=\"https://www.npmjs.com/package/perspective-camera\"></a></p>\n<h4 id=\"camera-createcamera-opts-\"><code>camera = createCamera([opts])</code></h4>\n<p>Creates a new camera with options:</p>\n<ul>\n<li><code>fov</code> field of view in radians, default <code>Math.PI / 4</code></li>\n<li><code>far</code> the far range, default <code>100</code></li>\n<li><code>near</code> the near range, default <code>1 / 100</code></li>\n<li><code>position</code> the camera position, default <code>[0, 0, 0]</code></li>\n<li><code>direction</code> the camera direction, default <code>[0, 0, -1]</code></li>\n<li><code>up</code> the camera up vector, default <code>[0, 1, 0]</code></li>\n<li><code>viewport</code> the screen-space viewport bounds, default <code>[-1, -1, 1, 1]</code></li>\n</ul>\n<p>The <code>viewport</code> is used to determine the aspect ratio of the projection, as well as projecting and ray-picking.</p>\n<h2 id=\"methods\">methods</h2>\n<h4 id=\"camera-update-\"><code>camera.update()</code></h4>\n<p>Updates the camera projection and view matrices from the camera&apos;s current state (position, direction, viewport, etc). </p>\n<h4 id=\"camera-identity-\"><code>camera.identity()</code></h4>\n<p>Resets the <code>position</code>, <code>direction</code>, <code>up</code>, <code>projection</code> and <code>view</code> values to their identity; the defaults described in the constructor.</p>\n<h4 id=\"camera-translate-vec3-\"><code>camera.translate(vec3)</code></h4>\n<p>Translates this camera&apos;s <code>position</code> by the given <code>vec3</code>.</p>\n<h4 id=\"camera-lookat-vec3-\"><code>camera.lookAt(vec3)</code></h4>\n<p>Updates the <code>direction</code> and <code>up</code> to look at the given <code>vec3</code> target.</p>\n<h4 id=\"camera-project-vec3-\"><code>camera.project(vec3)</code></h4>\n<p><a href=\"https://github.com/Jam3/camera-project\">Projects</a> the world space 3D point <code>vec3</code> into 2D screen-space based on this camera&apos;s <code>viewport</code> bounds. Returns a new <code>vec4</code> point with <code>z</code> and <code>w</code> components representing the computed depth (similar to <code>gl_FragCoord</code>).</p>\n<h4 id=\"camera-unproject-vec3-\"><code>camera.unproject(vec3)</code></h4>\n<p><a href=\"https://github.com/Jam3/camera-unproject\">Unprojects</a> the screen-space point into 3D world-space. The Z of the screen-space point is between 0 (near plane) and 1 (far plane).</p>\n<h4 id=\"camera-createpickingray-vec2-\"><code>camera.createPickingRay(vec2)</code></h4>\n<p>Creates a new picking ray from the 2D screen-space <code>vec2</code> point (i.e. the mouse).</p>\n<p>The ray is an instance of <a href=\"https://github.com/Jam3/ray-3d\">ray-3d</a>, and it can be used for hit-testing.</p>\n<pre><code class=\"lang-js\"><div class=\"line\"><span class=\"source js\"><span>var&#xA0;ray&#xA0;=&#xA0;camera.createPickingRay(mouse)</span></span></div><div class=\"line\"><span class=\"source js\"><span>if&#xA0;(ray.intersectsSphere(center,&#xA0;radius))</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;console.log(&quot;Hit!&quot;)</span></span></div>\n</code></pre>\n<h2 id=\"properties\">properties</h2>\n<h4 id=\"camera-viewport\"><code>camera.viewport</code></h4>\n<p>A <code>[x, y, width, height]</code> array defining the viewport in screen space.</p>\n<h4 id=\"camera-projection-camera-view\"><code>camera.projection</code>, <code>camera.view</code></h4>\n<p>The 4x4 projection and view matrices, computed after a call to <code>update()</code>. </p>\n<h4 id=\"camera-position-camera-direction-camera-up\"><code>camera.position</code>, <code>camera.direction</code>, <code>camera.up</code></h4>\n<p>The current position, direction, and up vectors.</p>\n<h2 id=\"see-also\">See Also</h2>\n<ul>\n<li><a href=\"https://www.npmjs.com/package/camera-unproject\">camera-unproject</a></li>\n<li><a href=\"https://www.npmjs.com/package/camera-project\">camera-project</a></li>\n<li><a href=\"https://www.npmjs.com/package/camera-picking-ray\">camera-picking-ray</a></li>\n<li><a href=\"https://www.npmjs.com/package/ray-3d\">ray-3d</a></li>\n<li><a href=\"https://www.npmjs.com/package/ray-aabb-intersection\">ray-aabb-intersection</a></li>\n<li><a href=\"https://www.npmjs.com/package/ray-sphere-intersection\">ray-sphere-intersection</a></li>\n<li><a href=\"https://www.npmjs.com/package/ray-plane-intersection\">ray-plane-intersection</a></li>\n<li><a href=\"https://www.npmjs.com/package/ray-triangle-intersection\">ray-triangle-intersection</a></li>\n</ul>\n<h2 id=\"license\">License</h2>\n<p>MIT, see <a href=\"http://github.com/Jam3/perspective-camera/blob/master/LICENSE.md\">LICENSE.md</a> for details.</p>\n"}