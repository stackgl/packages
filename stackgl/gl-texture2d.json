{"readme":"<h1 class=\"title\"><a target=\"_blank\" href=\"https://github.com/stackgl/gl-texture2d\">gl-texture2d</a><div class=\"contrib\"></div></h1>\n<p>WebGL texture object wrapper</p>\n<iframe scrolling=\"no\" seamless=\"seamless\" src=\"http://stack.gl/gl-texture2d/\"></iframe><h2 id=\"example\">Example</h2>\n<p><a href=\"http://stackgl.github.io/gl-texture2d/\">Try it in your browser right now</a></p>\n<pre><code class=\"lang-javascript\"><div class=\"line\"><span class=\"source js\"><span>var&#xA0;shell&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;=&#xA0;require(&quot;gl-now&quot;)()</span></span></div><div class=\"line\"><span class=\"source js\"><span>var&#xA0;createShader&#xA0;&#xA0;=&#xA0;require(&quot;gl-shader&quot;)</span></span></div><div class=\"line\"><span class=\"source js\"><span>var&#xA0;createTexture&#xA0;=&#xA0;require(&quot;gl-texture2d&quot;)</span></span></div><div class=\"line\"><span class=\"source js\"><span>var&#xA0;drawTriangle&#xA0;&#xA0;=&#xA0;require(&quot;a-big-triangle&quot;)</span></span></div><div class=\"line\"><span class=\"source js\"><span>var&#xA0;baboon&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;=&#xA0;require(&quot;baboon-image&quot;)</span></span></div><div class=\"line\"><span class=\"source js\"><span>var&#xA0;glslify&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;=&#xA0;require(&quot;glslify&quot;)</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source js\"><span>var&#xA0;createShader&#xA0;=&#xA0;glslify({</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;vertex:&quot;\\</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;attribute&#xA0;vec2&#xA0;position;\\</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;varying&#xA0;vec2&#xA0;texCoord;\\</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;void&#xA0;main()&#xA0;{\\</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;gl_Position&#xA0;=&#xA0;vec4(position,&#xA0;0,&#xA0;1);\\</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;texCoord&#xA0;=&#xA0;vec2(0.0,1.0)+vec2(0.5,-0.5)&#xA0;*&#xA0;(position&#xA0;+&#xA0;1.0);\\</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;}&quot;,&#xA0;</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;fragment:&#xA0;&quot;\\</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;precision&#xA0;highp&#xA0;float;\\</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;uniform&#xA0;sampler2D&#xA0;texture;\\</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;varying&#xA0;vec2&#xA0;texCoord;\\</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;void&#xA0;main()&#xA0;{\\</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;gl_FragColor&#xA0;=&#xA0;texture2D(texture,&#xA0;texCoord);\\</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;}&quot;,</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;inline:&#xA0;true</span></span></div><div class=\"line\"><span class=\"source js\"><span>})</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source js\"><span>var&#xA0;shader,&#xA0;texture</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source js\"><span>shell.on(&quot;gl-init&quot;,&#xA0;function()&#xA0;{</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;var&#xA0;gl&#xA0;=&#xA0;shell.gl</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;//Create&#xA0;texture</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;texture&#xA0;=&#xA0;createTexture(gl,&#xA0;baboon)</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;//Create&#xA0;shader</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;shader&#xA0;=&#xA0;createShader(gl)</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;shader.attributes.position.location&#xA0;=&#xA0;0</span></span></div><div class=\"line\"><span class=\"source js\"><span>})</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source js\"><span>shell.on(&quot;gl-render&quot;,&#xA0;function()&#xA0;{</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;//Draw&#xA0;it</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;shader.bind()</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;shader.uniforms.texture&#xA0;=&#xA0;texture.bind()</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;drawTriangle(shell.gl)</span></span></div><div class=\"line\"><span class=\"source js\"><span>})</span></span></div>\n</code></pre>\n<p>Here is what it should look like:</p>\n<p><img src=\"https://raw.github.com/mikolalysenko/gl-texture2d/master/screenshot.png\"></p>\n<h2 id=\"install\">Install</h2>\n<pre><code>npm install gl-texture2d\n</code></pre><h2 id=\"api\">API</h2>\n<pre><code class=\"lang-javascript\"><div class=\"line\"><span class=\"source js\"><span>var&#xA0;createTexture&#xA0;=&#xA0;require(&quot;gl-texture2d&quot;)</span></span></div>\n</code></pre>\n<h2 id=\"constructor\">Constructor</h2>\n<p>There are three basic usage patterns for <code>createTexture</code>:</p>\n<h3 id=\"var-tex-createtexture-gl-shape-format-type-\"><code>var tex = createTexture(gl, shape[, format, type])</code></h3>\n<p>Creates an unitialized texture with the given dimensions and format</p>\n<ul>\n<li><code>shape</code> is a length 2 array representing the <code>[width, height]</code> of the texture</li>\n<li><code>format</code> (optional) is the format of the texture (default <code>gl.RGBA</code>)</li>\n<li><code>type</code> is the type of texture (default <code>gl.UNSIGNED_BYTE</code>)</li>\n</ul>\n<h3 id=\"var-tex-createtexture-gl-domelement-format-type-\"><code>var tex = createTexture(gl, domElement[, format, type])</code></h3>\n<p>Creates a texture from the given data source.  Where <code>domElement</code> is one of the following items:</p>\n<ul>\n<li>An <code>ImageData</code> object</li>\n<li>An <code>HTMLCanvas</code> object</li>\n<li>An <code>HTMLImage</code> object</li>\n<li>An <code>HTMLVideo</code> object</li>\n</ul>\n<p>And <code>format</code> is an OpenGL data format or defaults to <code>gl.RGBA</code> and <code>type</code> is the storage type which defaults to <code>gl.UNSIGNED_BYTE</code></p>\n<h3 id=\"var-tex-createtexture-gl-rawobject-format-type-\"><code>var tex = createTexture(gl, rawObject[, format, type])</code></h3>\n<p>Creates a texture from the given raw element. <code>rawObject</code> is a DOM-like element that have a <code>raw</code>, <code>width</code> and <code>height</code> fields. <code>raw</code> is a value that directly get passed to <code>texImage2D</code> / <code>texSubImage2D</code>.</p>\n<p>This allows to support non-DOM implementation of WebGL like gl-headless.</p>\n<h3 id=\"var-tex-createtexture-gl-array-\"><code>var tex = createTexture(gl, array)</code></h3>\n<p>Creates a texture from an <a href=\"https://github.com/mikolalysenko/ndarray\">ndarray</a>.  The rules for selecting the format and type depend on the shape of the ndarray.  The type of the texture is inferred according to the following rules.  Let:</p>\n<ul>\n<li><code>dtype = ndarray.dtype(array)</code></li>\n<li><code>shape = array.shape</code></li>\n</ul>\n<p>Then the rules for <code>type</code> and <code>format</code> are defined according to the following table:</p>\n<table>\n<thead>\n<tr>\n<th><code>dtype</code></th>\n<th style=\"text-align:center\"><code>shape</code></th>\n<th style=\"text-align:center\"><code>format</code></th>\n<th style=\"text-align:center\"><code>type</code></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>float*</code></td>\n<td style=\"text-align:center\">[w,h]</td>\n<td style=\"text-align:center\">LUMINANCE</td>\n<td style=\"text-align:center\">FLOAT</td>\n</tr>\n<tr>\n<td><code>float*</code></td>\n<td style=\"text-align:center\">[w,h,1]</td>\n<td style=\"text-align:center\">ALPHA</td>\n<td style=\"text-align:center\">FLOAT</td>\n</tr>\n<tr>\n<td><code>float*</code></td>\n<td style=\"text-align:center\">[w,h,2]</td>\n<td style=\"text-align:center\">LUMINANCE_ALPHA</td>\n<td style=\"text-align:center\">FLOAT</td>\n</tr>\n<tr>\n<td><code>float*</code></td>\n<td style=\"text-align:center\">[w,h,3]</td>\n<td style=\"text-align:center\">RGB</td>\n<td style=\"text-align:center\">FLOAT</td>\n</tr>\n<tr>\n<td><code>float*</code></td>\n<td style=\"text-align:center\">[w,h,4]</td>\n<td style=\"text-align:center\">RGBA</td>\n<td style=\"text-align:center\">FLOAT</td>\n</tr>\n<tr>\n<td><code>(u)int*</code></td>\n<td style=\"text-align:center\">[w,h]</td>\n<td style=\"text-align:center\">LUMINANCE</td>\n<td style=\"text-align:center\">UNSIGNED_BYTE</td>\n</tr>\n<tr>\n<td><code>(u)int*</code></td>\n<td style=\"text-align:center\">[w,h,1]</td>\n<td style=\"text-align:center\">ALPHA</td>\n<td style=\"text-align:center\">UNSIGNED_BYTE</td>\n</tr>\n<tr>\n<td><code>(u)int*</code></td>\n<td style=\"text-align:center\">[w,h,2]</td>\n<td style=\"text-align:center\">LUMINANCE_ALPHA</td>\n<td style=\"text-align:center\">UNSIGNED_BYTE</td>\n</tr>\n<tr>\n<td><code>(u)int*</code></td>\n<td style=\"text-align:center\">[w,h,3]</td>\n<td style=\"text-align:center\">RGB</td>\n<td style=\"text-align:center\">UNSIGNED_BYTE</td>\n</tr>\n<tr>\n<td><code>(u)int*</code></td>\n<td style=\"text-align:center\">[w,h,4]</td>\n<td style=\"text-align:center\">RGBA</td>\n<td style=\"text-align:center\">UNSIGNED_BYTE</td>\n</tr>\n</tbody>\n</table>\n<p>Other combinations of shape and dtype are invalid and throw an error.</p>\n<h2 id=\"texture-methods\">Texture Methods</h2>\n<h3 id=\"tex-bind-texunit-\"><code>tex.bind([texUnit])</code></h3>\n<p>Binds the texture for use.  Basically a short cut for:</p>\n<pre><code class=\"lang-javascript\"><div class=\"line\"><span class=\"source js\"><span>gl.activeTexture(gl.TEXTURE0&#xA0;+&#xA0;texUnit)</span></span></div><div class=\"line\"><span class=\"source js\"><span>gl.bindTexture(gl.TEXTURE_2D,&#xA0;this.handle)</span></span></div>\n</code></pre>\n<p>If <code>texUnit</code> is not specified then the active texture is not changed.</p>\n<p><strong>Returns</strong> The texture unit the texture is bound to.</p>\n<h3 id=\"tex-dispose-\"><code>tex.dispose()</code></h3>\n<p>Destroys the texture object and releases all of its resources.  Under the hood this is equivalent to:</p>\n<pre><code class=\"lang-javascript\"><div class=\"line\"><span class=\"source js\"><span>gl.deleteTexture(this.handle)</span></span></div>\n</code></pre>\n<h3 id=\"tex-setpixels-data-offset-miplevel-\"><code>tex.setPixels(data[, offset, mipLevel])</code></h3>\n<p>Unpacks <code>data</code> into a subregion of the texture.  As before in the constructor <code>data</code> can be either an <code>ndarray</code>, <code>HTMLCanvas</code>, <code>HTMLImage</code>, <code>HTMLVideo</code> or a <code>rawObject</code>.  If <code>data</code> is an ndarray it must have a compatible format with the initial array layout.</p>\n<ul>\n<li><code>offset</code> is a length 2 array representing the offset into which the pixels will be written in <code>[x,y]</code>.  (Default: <code>[0,0]</code>)</li>\n<li><code>mipLevel</code> is the mip level to write to. (Default <code>0</code>)</li>\n</ul>\n<p>If <code>data</code> is an <code>ndarray</code> the same rules as in the constructor are followed for converting the type of the buffer.</p>\n<h3 id=\"tex-generatemipmap-\"><code>tex.generateMipmap()</code></h3>\n<p>Generates mipmaps for the texture.  This will fail if the texture dimensions are not a power of two.</p>\n<h2 id=\"texture-properties\">Texture Properties</h2>\n<h4 id=\"tex-shape\"><code>tex.shape</code></h4>\n<p>An array representing the dimensions of the texture in <code>[width, height]</code>.  Writing to this value will resize the texture and invalidate its contents.  For example, to resize the texture <code>tex</code> to the shape <code>[newWidth, newHeight]</code> you can do:</p>\n<pre><code class=\"lang-javascript\"><div class=\"line\"><span class=\"source js\"><span>tex.shape&#xA0;=&#xA0;[newWidth,&#xA0;newHeight]</span></span></div>\n</code></pre>\n<h4 id=\"tex-wrap\"><code>tex.wrap</code></h4>\n<p>Texture wrap around behavior for x/y of the texture.  Used to set/get <code>[gl.TEXTURE_WRAP_T, gl.TEXTURE_WRAP_S]</code>.  Defaults to <code>[gl.CLAMP_TO_EDGE, gl.CLAMP_TO_EDGE]</code>.  To update this value, write to it with a vector. For example,</p>\n<pre><code class=\"lang-javascript\"><div class=\"line\"><span class=\"source js\"><span>tex.wrap&#xA0;=&#xA0;[gl.MIRRORED_REPEAT,&#xA0;gl.REPEAT]</span></span></div>\n</code></pre>\n<p>Or you can update it with a single value to set the wrap mode for both axes:</p>\n<pre><code class=\"lang-javascript\"><div class=\"line\"><span class=\"source js\"><span>tex.wrap&#xA0;=&#xA0;gl.REPEAT</span></span></div>\n</code></pre>\n<h4 id=\"tex-magfilter\"><code>tex.magFilter</code></h4>\n<p>Magnification filter.  Used to set/get <code>gl.TEXTURE_MAG_FILTER</code>. Defaults to <code>gl.NEAREST</code></p>\n<h4 id=\"tex-minfilter\"><code>tex.minFilter</code></h4>\n<p>Minification filter. Used to set/get <code>gl.TEXTURE_MIN_FILTER</code>. Defaults to <code>gl.NEAREST</code></p>\n<h4 id=\"tex-mipsamples\"><code>tex.mipSamples</code></h4>\n<p>The number of anisotropic filtering samples to use.  This requires <code>EXT_texture_filter_anisotropic</code> to have any effect.  High values will improve mipmap quality, but decrease performance.</p>\n<h2 id=\"internals\">Internals</h2>\n<h4 id=\"tex-gl\"><code>tex.gl</code></h4>\n<p>A reference to the WebGL context of the texture.</p>\n<h4 id=\"tex-handle\"><code>tex.handle</code></h4>\n<p>A handle to the underlying texture object.</p>\n<h4 id=\"tex-format\"><code>tex.format</code></h4>\n<p>The internal format of the texture.</p>\n<h4 id=\"tex-type\"><code>tex.type</code></h4>\n<p>The internal data type of the texture.</p>\n<h2 id=\"credits\">Credits</h2>\n<p>(c) 2013-2014 Mikola Lysenko. MIT License</p>\n"}