{"readme":"<h1 class=\"title\"><a target=\"_blank\" href=\"https://github.com/stackgl/gl-audio-analyser\">gl-audio-analyser</a><div class=\"contrib\"></div></h1>\n<p><a href=\"http://github.com/badges/stability-badges\"></a></p>\n<p>Pull audio waveform/frequency data into WebGL for realtime audio visualisation!</p>\n<p>This is a wrapper around the more generic/flexible <a href=\"http://github.com/hughsk/web-audio-analyser\">web-audio-analyser</a> that makes it easier to just drop into a new WebGL project and get up and running quickly.</p>\n<iframe scrolling=\"no\" seamless=\"seamless\" src=\"http://stack.gl/gl-audio-analyser/\"></iframe><h2 id=\"browser-usage\">Browser Usage</h2>\n<p><a href=\"https://nodei.co/npm/gl-audio-analyser/\"></a></p>\n<p>You can pull <code>gl-audio-analyser</code> into your project using <a href=\"http://browserify.org\">browserify</a>.</p>\n<p>See <a href=\"http://github.com/stackgl/gl-audio-analyser/blob/master/demo/index.js\"><code>demo/index.js</code></a> for a full usage example.</p>\n<h3 id=\"analyser-require-gl-audio-analyser-gl-audio-ctx-\"><code>analyser = require(&apos;gl-audio-analyser&apos;)(gl, audio, [ctx])</code></h3>\n<p>Creates a new audio analyser given the following arguments:</p>\n<ul>\n<li><code>gl</code> is the WebGL context you want to use.</li>\n<li><code>audio</code> is an audio node to analyse, be that an <code>&lt;audio&gt;</code> tag,\n<code>MediaStream</code> or <code>AudioSourceNode</code>.</li>\n<li><code>ctx</code> is an (optional) <code>AudioContext</code> instance to use.\nNote however there may only be one instance of this per page,\nand if not supplied one will be created for you.</li>\n</ul>\n<p>Once created, you should then bind the waveform and/or frequency\ntextures once per frame:</p>\n<h3 id=\"analyser-bindwaveform-index-\"><code>analyser.bindWaveform([index])</code></h3>\n<p>Uploads the audio&apos;s waveform data to a specific texture <code>index</code>, which defaults to 0, returning the bound GL texture index.</p>\n<h3 id=\"analyser-bindfrequencies-index-\"><code>analyser.bindFrequencies([index])</code></h3>\n<p>Uploads the audio&apos;s frequency data to a specific texture <code>index</code>, which defaults to 0, returning the bound GL texture index.</p>\n<h2 id=\"glsl-usage\">GLSL Usage</h2>\n<p>You can then read the audio data from a texture. For your convenience,\nthis module can also be used with\n<a href=\"http://github.com/stackgl/glslify\">glslify</a>, though the <a href=\"http://github.com/stackgl/gl-audio-analyser/blob/master/index.glsl\">GLSL module\nsource</a> is relatively short.</p>\n<p>See <a href=\"http://github.com/stackgl/gl-audio-analyser/blob/master/demo/index.frag\"><code>demo/index.frag</code></a> for an example.</p>\n<h3 id=\"analyse-sampler2d-texture-float-audioindex-\"><code>analyse(sampler2D texture, float audioIndex)</code></h3>\n<pre><code class=\"lang-glsl\"><div class=\"line\"><span class=\"source glsl\"><span class=\"storage modifier glsl\"><span>uniform</span></span><span>&#xA0;</span><span class=\"storage type glsl\"><span>sampler2D</span></span><span>&#xA0;audioTexture;</span></span></div><div class=\"line\"><span class=\"source glsl\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source glsl\"><span>#</span><span class=\"meta preprocessor keyword import define glsl\"><span>pragma&#xA0;glslify:</span></span><span class=\"entity name function glsl\"><span>&#xA0;analyse&#xA0;</span></span><span class=\"operator glsl\"><span>=&#xA0;</span></span><span class=\"keyword operator glsl\"><span>require</span></span><span>(</span><span class=\"string quoted double\"><span>gl-audio-analyser</span></span><span>)</span><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source glsl\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source glsl\"><span class=\"storage type glsl\"><span>void</span></span><span class=\"meta function c\"><span class=\"punctuation whitespace function leading c\"><span>&#xA0;</span></span><span class=\"entity name function c\"><span>main</span></span><span class=\"meta parens c\"><span class=\"punctuation section parens begin c\"><span>(</span></span><span class=\"punctuation section parens end c\"><span>)</span></span></span><span>&#xA0;</span><span class=\"meta block c\"><span class=\"punctuation section block begin c\"><span>{</span></span></span></span></span></div><div class=\"line\"><span class=\"source glsl\"><span class=\"meta function c\"><span class=\"meta block c\"><span>&#xA0;&#xA0;</span><span class=\"storage type glsl\"><span>float</span></span><span>&#xA0;amplitude&#xA0;=</span><span class=\"meta function-call c\"><span class=\"punctuation whitespace function-call leading c\"><span>&#xA0;</span></span><span class=\"support function any-method c\"><span>analyse</span></span><span>(</span></span><span>audioTexture);</span></span></span></span></div><div class=\"line\"><span class=\"source glsl\"><span class=\"meta function c\"><span class=\"meta block c\"><span>&#xA0;</span></span></span></span></div><div class=\"line\"><span class=\"source glsl\"><span class=\"meta function c\"><span class=\"meta block c\"><span>&#xA0;&#xA0;</span><span class=\"support variable glsl\"><span>gl_FragColor</span></span><span>&#xA0;=</span><span class=\"meta function-call c\"><span class=\"punctuation whitespace function-call leading c\"><span>&#xA0;</span></span><span class=\"support function any-method c\"><span>vec4</span></span><span>(</span><span class=\"support function any-method c\"><span>vec3</span></span><span>(</span></span><span>amplitude),&#xA0;</span><span class=\"constant numeric c\"><span>1.0</span></span><span>);</span></span></span></span></div><div class=\"line\"><span class=\"source glsl\"><span class=\"meta function c\"><span class=\"meta block c\"><span class=\"punctuation section block end c\"><span>}</span></span></span></span></span></div>\n</code></pre>\n<h2 id=\"contributing\">Contributing</h2>\n<p>See <a href=\"https://github.com/stackgl/contributing\">stackgl/contributing</a> for details.</p>\n<h2 id=\"license\">License</h2>\n<p>MIT. See <a href=\"http://github.com/stackgl/gl-audio-analyser/blob/master/LICENSE.md\">LICENSE.md</a> for details.</p>\n"}