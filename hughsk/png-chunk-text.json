{"readme":"<h1 class=\"title\"><a target=\"_blank\" href=\"https://github.com/hughsk/png-chunk-text\">png-chunk-text</a><div class=\"contrib\"></div></h1>\n<p><a href=\"http://github.com/badges/stability-badges\"></a></p>\n<p>Create or parse a PNG tEXt chunk for storing uncompressed text data in PNG images.</p>\n<p>Can be used in combination with <a href=\"https://github.com/hughsk/png-chunks-extract\">png-chunks-extract</a> and <a href=\"https://github.com/hughsk/png-chunks-encode\">png-chunks-encode</a> for adding and reading custom metadata in PNG images.</p>\n<p>Works in Node, or in the browser using <a href=\"http://browserify.org/\">browserify</a>.</p>\n<h2 id=\"usage\">Usage</h2>\n<p><a href=\"https://www.npmjs.com/package/png-chunk-text\"></a></p>\n<h3 id=\"chunk-text-encode-key-value-\"><code>chunk = text.encode(key, value)</code></h3>\n<p>Returns a chunk object containing the metadata for a given <code>key</code> and <code>value</code>:</p>\n<pre><code class=\"lang-javascript\"><div class=\"line\"><span class=\"source js\"><span>{</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;name:&#xA0;&apos;tEXt&apos;,</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;data:&#xA0;Uint8Array([...])</span></span></div><div class=\"line\"><span class=\"source js\"><span>}</span></span></div>\n</code></pre>\n<pre><code class=\"lang-javascript\"><div class=\"line\"><span class=\"source js\"><span>const&#xA0;extract&#xA0;=&#xA0;require(&apos;png-chunks-extract&apos;)</span></span></div><div class=\"line\"><span class=\"source js\"><span>const&#xA0;encode&#xA0;=&#xA0;require(&apos;png-chunks-encode&apos;)</span></span></div><div class=\"line\"><span class=\"source js\"><span>const&#xA0;text&#xA0;=&#xA0;require(&apos;png-chunk-text&apos;)</span></span></div><div class=\"line\"><span class=\"source js\"><span>const&#xA0;path&#xA0;=&#xA0;require(&apos;path&apos;)</span></span></div><div class=\"line\"><span class=\"source js\"><span>const&#xA0;fs&#xA0;=&#xA0;require(&apos;fs&apos;)</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source js\"><span>const&#xA0;buffer&#xA0;=&#xA0;fs.readFileSync(path.join(__dirname,&#xA0;&apos;test.png&apos;))</span></span></div><div class=\"line\"><span class=\"source js\"><span>const&#xA0;chunks&#xA0;=&#xA0;extract(buffer)</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source js\"><span>//&#xA0;Add&#xA0;new&#xA0;chunks&#xA0;before&#xA0;the&#xA0;IEND&#xA0;chunk</span></span></div><div class=\"line\"><span class=\"source js\"><span>chunks.splice(-1,&#xA0;0,&#xA0;text.encode(&apos;hello&apos;,&#xA0;&apos;world&apos;))</span></span></div><div class=\"line\"><span class=\"source js\"><span>chunks.splice(-1,&#xA0;0,&#xA0;text.encode(&apos;lorem&apos;,&#xA0;&apos;ipsum&apos;))</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source js\"><span>fs.writeFileSync(</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;path.join(__dirname,&#xA0;&apos;test-out.png&apos;),</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;new&#xA0;Buffer(encode(chunks))</span></span></div><div class=\"line\"><span class=\"source js\"><span>)</span></span></div>\n</code></pre>\n<h3 id=\"data-text-decode-chunk-\"><code>data = text.decode(chunk)</code></h3>\n<p>Reads a <code>Uint8Array</code> or Node.js <code>Buffer</code> instance containing a <code>tEXt</code> PNG chunk&apos;s data and returns its keyword/text:</p>\n<pre><code class=\"lang-javascript\"><div class=\"line\"><span class=\"source js\"><span>{</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;keyword:&#xA0;&apos;hello&apos;,</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;text:&#xA0;&apos;world&apos;</span></span></div><div class=\"line\"><span class=\"source js\"><span>}</span></span></div>\n</code></pre>\n<pre><code class=\"lang-javascript\"><div class=\"line\"><span class=\"source js\"><span>const&#xA0;extract&#xA0;=&#xA0;require(&apos;png-chunks-extract&apos;)</span></span></div><div class=\"line\"><span class=\"source js\"><span>const&#xA0;text&#xA0;=&#xA0;require(&apos;png-chunk-text&apos;)</span></span></div><div class=\"line\"><span class=\"source js\"><span>const&#xA0;path&#xA0;=&#xA0;require(&apos;path&apos;)</span></span></div><div class=\"line\"><span class=\"source js\"><span>const&#xA0;fs&#xA0;=&#xA0;require(&apos;fs&apos;)</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source js\"><span>const&#xA0;buffer&#xA0;=&#xA0;fs.readFileSync(path.join(__dirname,&#xA0;&apos;test-out.png&apos;))</span></span></div><div class=\"line\"><span class=\"source js\"><span>const&#xA0;chunks&#xA0;=&#xA0;extract(buffer)</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source js\"><span>const&#xA0;textChunks&#xA0;=&#xA0;chunks.filter(function&#xA0;(chunk)&#xA0;{</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;return&#xA0;chunk.name&#xA0;===&#xA0;&apos;tEXt&apos;</span></span></div><div class=\"line\"><span class=\"source js\"><span>}).map(function&#xA0;(chunk)&#xA0;{</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;return&#xA0;text.decode(chunk.data)</span></span></div><div class=\"line\"><span class=\"source js\"><span>})</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source js\"><span>console.log(textChunks[0].keyword)&#xA0;//&#xA0;&apos;hello&apos;</span></span></div><div class=\"line\"><span class=\"source js\"><span>console.log(textChunks[0].text)&#xA0;&#xA0;&#xA0;&#xA0;//&#xA0;&apos;world&apos;</span></span></div><div class=\"line\"><span class=\"source js\"><span>console.log(textChunks[1].keyword)&#xA0;//&#xA0;&apos;lorem&apos;</span></span></div><div class=\"line\"><span class=\"source js\"><span>console.log(textChunks[1].text)&#xA0;&#xA0;&#xA0;&#xA0;//&#xA0;&apos;ipsum&apos;</span></span></div>\n</code></pre>\n<h2 id=\"see-also\">See Also</h2>\n<ul>\n<li><a href=\"https://github.com/hughsk/png-chunks-extract\">png-chunks-extract</a></li>\n<li><a href=\"https://github.com/hughsk/png-chunks-encode\">png-chunks-encode</a></li>\n</ul>\n<h2 id=\"license\">License</h2>\n<p>MIT, see <a href=\"http://github.com/hughsk/png-chunk-text/blob/master/LICENSE.md\">LICENSE.md</a> for details.</p>\n"}